<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Taxi Paris Karim | Taxi Paris CDG Orly | Réservation & Estimation</title>

  <meta name="description" content="Taxi Paris Karim — service premium en Île-de-France. Réservation, transferts CDG/Orly, longue distance. Paiements CB, Apple Pay, Google Pay, PayPal. Facture sur demande." />
  <meta name="keywords" content="Taxi Paris, Taxi CDG, Taxi Orly, Taxi Villepinte, Taxi Versailles, Taxi Île-de-France, Réservation taxi, Taxi premium, Transfert aéroport, Paris Beauvais, Orly Beauvais, CDG Beauvais, CDG Orly, Orly CDG, Estimation taxi Paris" />
  <meta name="theme-color" content="#0b0c10" />

  <!-- Open Graph / WhatsApp preview -->
  <meta property="og:title" content="Taxi Paris Karim — Réservation & Estimation" />
  <meta property="og:description" content="Service taxi premium à Paris & Île-de-France. Transferts CDG/Orly, longue distance, paiements CB/Apple Pay/Google Pay/PayPal. Facture sur demande." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="fr_FR" />

  <style>
    :root{
      --bg:#07080b;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.10);
      --txt:#f7f6f2;
      --muted:rgba(247,246,242,.72);
      --muted2:rgba(247,246,242,.56);
      --gold:#d6b36a;
      --gold2:#f1d89a;
      --line:rgba(214,179,106,.18);
      --shadow: 0 26px 90px rgba(0,0,0,.70);
      --shadow2: 0 16px 50px rgba(0,0,0,.55);
      --radius:18px;
      --radius2:24px;
      --ok:#7CFFB2;
      --warn:#ffcf66;
      --bad:#ff6b6b;
      --blue:#6bbcff;
      --red:#ff3b3b;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--txt);
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(214,179,106,.18), transparent 60%),
        radial-gradient(900px 700px at 80% 0%, rgba(107,188,255,.14), transparent 55%),
        radial-gradient(900px 700px at 70% 80%, rgba(255,59,59,.08), transparent 55%),
        linear-gradient(180deg, #05060a 0%, #0b0c10 55%, #05060a 100%);
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    .container{width:min(1120px, calc(100% - 40px)); margin:0 auto}
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--line);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color:var(--muted);
      font-size:13px;
    }
    .dot{width:8px; height:8px; border-radius:999px; background:var(--gold); box-shadow: 0 0 0 6px rgba(214,179,106,.16)}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:12px 16px; border-radius:14px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(214,179,106,.18), rgba(255,255,255,.04));
      color:var(--txt);
      box-shadow: var(--shadow2);
      cursor:pointer;
      transition: transform .18s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-2px); border-color: rgba(214,179,106,.35)}
    .btn.secondary{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
    }
    .btn.ghost{
      background: transparent;
      border-color: rgba(255,255,255,.18);
      box-shadow: none;
    }
    .btn.small{padding:10px 12px; border-radius:12px; font-size:14px}
    .btn.gold{
      background: linear-gradient(180deg, rgba(241,216,154,.22), rgba(214,179,106,.10));
      border-color: rgba(241,216,154,.35);
    }

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:50;
      background: rgba(7,8,11,.60);
      border-bottom: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    .topbar-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      letter-spacing:.4px;
    }
    .logo{
      width:40px; height:40px; border-radius:14px;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(241,216,154,.85), rgba(214,179,106,.25)),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
      border:1px solid rgba(241,216,154,.30);
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
      display:grid; place-items:center;
    }
    .logo svg{opacity:.95}
    .brand-title{font-weight:700; font-size:15px}
    .brand-sub{font-size:12px; color:var(--muted2); margin-top:2px}
    .nav{display:flex; gap:18px; align-items:center}
    .nav a{color:var(--muted); font-size:14px; padding:10px 8px; border-radius:12px}
    .nav a:hover{background: rgba(255,255,255,.06); color:var(--txt)}
    .right-actions{display:flex; gap:10px; align-items:center}
    .lang{
      display:flex; gap:8px; align-items:center;
      padding:8px 10px; border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    .lang button{
      border:0; background:transparent; color:var(--muted);
      cursor:pointer; font-weight:700; font-size:12px; padding:6px 8px; border-radius:10px;
    }
    .lang button.active{background: rgba(214,179,106,.18); color:var(--txt); border:1px solid rgba(214,179,106,.25)}
    .burger{
      display:none;
      width:44px; height:44px; border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      cursor:pointer;
      align-items:center; justify-content:center;
    }
    .burger svg{opacity:.9}
    .drawer{
      position:fixed; inset:0; z-index:80;
      background: rgba(0,0,0,.55);
      opacity:0; pointer-events:none;
      transition: opacity .2s ease;
    }
    .drawer.open{opacity:1; pointer-events:auto}
    .panel{
      position:absolute; right:0; top:0; height:100%;
      width:min(380px, 90vw);
      background: rgba(11,12,16,.92);
      border-left:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      transform: translateX(100%);
      transition: transform .22s ease;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      padding:18px;
      display:flex; flex-direction:column; gap:10px;
    }
    .drawer.open .panel{transform: translateX(0)}
    .panel a{
      padding:14px 12px; border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:var(--txt);
    }
    .panel a:hover{border-color: rgba(214,179,106,.35)}
    .panel .closeRow{display:flex; justify-content:space-between; align-items:center; margin-bottom:6px}
    .panel .closeRow .x{
      width:44px; height:44px; border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      cursor:pointer;
      display:grid; place-items:center;
    }

    /* Hero */
    .hero{padding:54px 0 28px}
    .hero-grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:28px;
      align-items:stretch;
    }
    .hero-card{
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero-card::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(600px 300px at 20% 0%, rgba(241,216,154,.22), transparent 55%),
                  radial-gradient(600px 300px at 80% 15%, rgba(107,188,255,.12), transparent 50%);
      pointer-events:none;
    }
    .hero-pad{padding:28px; position:relative}
    h1{
      margin:14px 0 10px;
      font-size: clamp(28px, 4.2vw, 44px);
      letter-spacing: -0.6px;
      line-height:1.08;
    }
    .lead{
      margin:0;
      color:var(--muted);
      font-size: clamp(14px, 2vw, 17px);
      line-height:1.55;
      max-width: 60ch;
    }
    .hero-actions{margin-top:18px; display:flex; flex-wrap:wrap; gap:10px}
    .mini{
      margin-top:16px;
      display:grid; grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    .mini .chip{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 16px;
      padding:12px;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
    }
    .mini .chip strong{color:var(--txt)}
    .hero-photo{
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      min-height: 360px;
    }
    .hero-photo .img{
      position:absolute; inset:0;
      background:
        linear-gradient(180deg, rgba(7,8,11,.35), rgba(7,8,11,.78)),
        url("https://images.unsplash.com/photo-1511739001486-6bfe10ce785f?auto=format&fit=crop&w=1600&q=70") center/cover no-repeat;
      transform: scale(1.05);
      filter: contrast(1.05) saturate(1.05);
    }
    .hero-photo .overlay{
      position:absolute; inset:0; padding:22px;
      display:flex; flex-direction:column; justify-content:flex-end; gap:12px;
    }
    .statRow{display:flex; gap:10px; flex-wrap:wrap}
    .stat{
      flex:1 1 140px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      border-radius: 18px;
      padding:12px 14px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .stat .k{font-size:12px; color:var(--muted2)}
    .stat .v{font-size:16px; font-weight:800; margin-top:2px}
    .glow{
      position:absolute; width:680px; height:680px;
      left:-260px; top:-380px;
      background: radial-gradient(circle, rgba(241,216,154,.18), transparent 60%);
      filter: blur(8px);
      pointer-events:none;
    }

    /* Sections */
    section{padding:46px 0}
    .section-title{
      display:flex; align-items:flex-end; justify-content:space-between; gap:16px; flex-wrap:wrap;
      margin-bottom:16px;
    }
    h2{
      margin:0;
      font-size: clamp(20px, 3vw, 28px);
      letter-spacing:-.3px;
    }
    .section-sub{
      margin:0; color:var(--muted); max-width: 68ch; line-height:1.55; font-size:14px;
    }
    .grid-3{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }
    .card{
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border-radius: var(--radius2);
      box-shadow: var(--shadow2);
      padding:18px;
      position:relative;
      overflow:hidden;
    }
    .card::after{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(460px 240px at 20% 10%, rgba(214,179,106,.12), transparent 55%);
      pointer-events:none;
      opacity:.9;
    }
    .card > *{position:relative}
    .card h3{margin:0 0 8px; font-size:16px}
    .card p{margin:0; color:var(--muted); font-size:14px; line-height:1.55}
    .list{
      margin:12px 0 0; padding:0; list-style:none;
      display:grid; gap:10px;
    }
    .li{
      display:flex; gap:10px; align-items:flex-start;
      color:var(--muted);
      font-size:14px;
      line-height:1.45;
    }
    .tick{
      width:18px; height:18px; border-radius:6px;
      background: rgba(124,255,178,.12);
      border:1px solid rgba(124,255,178,.30);
      display:grid; place-items:center;
      flex:0 0 18px;
      margin-top:2px;
    }

    /* Tarifs tables */
    .table{
      width:100%;
      border-collapse: separate;
      border-spacing:0;
      overflow:hidden;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .table th, .table td{
      padding:14px 14px;
      border-bottom:1px solid rgba(255,255,255,.08);
      font-size:14px;
      text-align:left;
    }
    .table th{color:var(--muted2); font-weight:800; letter-spacing:.2px; background: rgba(255,255,255,.04)}
    .table tr:last-child td{border-bottom:0}
    .price{font-weight:900}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color:var(--muted);
      font-size:12px;
      margin-top:12px;
    }

    /* Estimator / form */
    .split{
      display:grid; grid-template-columns: 1fr 1fr; gap:14px;
      align-items:stretch;
    }
    .field{
      display:flex; flex-direction:column; gap:8px;
      margin-bottom:12px;
    }
    label{font-size:13px; color:var(--muted2); font-weight:800; letter-spacing:.2px}
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color:var(--txt);
      outline:none;
      transition: border-color .2s ease, background .2s ease;
    }
    textarea{min-height:110px; resize:vertical}
    input:focus, select:focus, textarea:focus{border-color: rgba(214,179,106,.40); background: rgba(0,0,0,.35)}
    .hint{color:var(--muted2); font-size:12.5px; line-height:1.45}
    .result{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding:14px;
      margin-top:10px;
      display:grid;
      gap:10px;
    }
    .result .row{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap}
    .k{color:var(--muted2); font-size:13px; font-weight:800}
    .v{color:var(--txt); font-size:14px; font-weight:900}
    .note{
      color:var(--muted);
      font-size:13px;
      line-height:1.45;
      border-left: 3px solid rgba(214,179,106,.35);
      padding-left:12px;
    }
    .alert{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding:12px 14px;
      color:var(--muted);
      font-size:13.5px;
      line-height:1.45;
    }
    .alert strong{color:var(--txt)}
    .ok{color:var(--ok)}
    .warn{color:var(--warn)}
    .bad{color:var(--bad)}

    /* Payments */
    .payRow{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top:12px;
    }
    .pay{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:var(--muted);
      font-size:13px;
    }
    .pay svg{width:22px; height:22px; opacity:.95}
    .muted{color:var(--muted)}
    .footer{
      padding:30px 0 50px;
      color:var(--muted2);
      border-top:1px solid rgba(255,255,255,.08);
      margin-top:30px;
    }
    .footGrid{display:grid; grid-template-columns: 1.2fr .8fr; gap:14px}
    .small{font-size:12.5px; line-height:1.55}
    .links{display:flex; gap:10px; flex-wrap:wrap}
    .links a{padding:10px 12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.04)}
    .mapWrap{
      border-radius: var(--radius2);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      min-height: 420px;
    }
    #map{width:100%; height:420px}
    .imgCard{
      border-radius: var(--radius2);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .imgCard img{width:100%; display:block}

    /* Reveal animations */
    .reveal{
      opacity:0;
      transform: translateY(14px);
      transition: opacity .55s ease, transform .55s ease;
    }
    .reveal.in{
      opacity:1;
      transform: translateY(0);
    }

    /* Responsive */
    @media (max-width: 920px){
      .hero-grid{grid-template-columns: 1fr}
      .mini{grid-template-columns: 1fr}
      .grid-3{grid-template-columns: 1fr}
      .split{grid-template-columns: 1fr}
      .nav{display:none}
      .burger{display:flex}
      #map{height:380px}
    }
  </style>

  <!-- SEO / LocalBusiness schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TaxiService",
    "name": "Taxi Paris Karim",
    "areaServed": [
      "Paris", "Île-de-France", "Versailles", "Val-d’Oise", "Seine-Saint-Denis", "Val-de-Marne", "Hauts-de-Seine",
      "Aéroport Paris-Charles de Gaulle (CDG)", "Aéroport de Paris-Orly (ORY)", "Parc des Expositions de Villepinte"
    ],
    "serviceType": ["Taxi", "Transfert aéroport", "Longue distance", "Réservation"],
    "url": "https://rimk10.github.io/taxi-paris-karim/",
    "paymentAccepted": ["Cash", "Credit Card", "Apple Pay", "Google Pay", "PayPal"],
    "slogan": "Service premium, discret et ponctuel"
  }
  </script>
</head>

<body>
  <!-- Drawer -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <div class="panel">
      <div class="closeRow">
        <div class="brand">
          <div class="logo" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M7 12h10M8 7h8M6 17h12" stroke="rgba(247,246,242,.92)" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div>
            <div class="brand-title">Taxi Paris Karim</div>
            <div class="brand-sub" data-i18n="nav_sub">Menu</div>
          </div>
        </div>
        <button class="x" id="closeDrawer" aria-label="Fermer">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M6 6l12 12M18 6L6 18" stroke="rgba(247,246,242,.90)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <a href="#services" onclick="closeDrawer()" data-i18n="nav_services">Services</a>
      <a href="#tarifs" onclick="closeDrawer()" data-i18n="nav_tarifs">Tarification</a>
      <a href="#estimation" onclick="closeDrawer()" data-i18n="nav_estimation">Estimation</a>
      <a href="#carte" onclick="closeDrawer()" data-i18n="nav_map">Carte</a>
      <a href="#reservation" onclick="closeDrawer()" data-i18n="nav_booking">Réservation</a>
      <a href="#contact" onclick="closeDrawer()" data-i18n="nav_contact">Contact</a>

      <div class="alert" style="margin-top:auto">
        <strong data-i18n="drawer_tip_t">Astuce :</strong>
        <span data-i18n="drawer_tip_b">tu peux tout gérer depuis iPhone (édition du fichier + commit).</span>
      </div>
    </div>
  </div>

  <!-- Topbar -->
  <div class="topbar">
    <div class="container">
      <div class="topbar-inner">
        <div class="brand">
          <div class="logo" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M3 15l2-7c.3-1.1 1.3-2 2.5-2h9c1.2 0 2.2.9 2.5 2l2 7" stroke="rgba(247,246,242,.92)" stroke-width="2" stroke-linecap="round"/>
              <path d="M7 15h10M7 18h10" stroke="rgba(241,216,154,.90)" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div>
            <div class="brand-title">Taxi Paris Karim</div>
            <div class="brand-sub" data-i18n="brand_sub">Service premium — Paris & Île-de-France</div>
          </div>
        </div>

        <nav class="nav" aria-label="Navigation principale">
          <a href="#services" data-i18n="nav_services">Services</a>
          <a href="#tarifs" data-i18n="nav_tarifs">Tarification</a>
          <a href="#estimation" data-i18n="nav_estimation">Estimation</a>
          <a href="#carte" data-i18n="nav_map">Carte</a>
          <a href="#reservation" data-i18n="nav_booking">Réservation</a>
          <a href="#contact" data-i18n="nav_contact">Contact</a>
        </nav>

        <div class="right-actions">
          <div class="lang" aria-label="Langues">
            <button id="langFR" class="active" type="button">FR</button>
            <button id="langEN" type="button">EN</button>
            <button id="langAR" type="button">AR</button>
          </div>

          <button class="burger" id="openDrawer" aria-label="Ouvrir le menu">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M5 7h14M5 12h14M5 17h14" stroke="rgba(247,246,242,.92)" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="container">
      <div class="hero-grid">
        <div class="hero-card reveal">
          <div class="glow" aria-hidden="true"></div>
          <div class="hero-pad">
            <span class="pill"><span class="dot"></span><span data-i18n="hero_pill">Ponctualité • Discrétion • Confort</span></span>
            <h1 data-i18n="hero_h1">Taxi premium à Paris & Île-de-France — CDG, Orly, Villepinte, Versailles</h1>
            <p class="lead" data-i18n="hero_lead">
              Une prise en charge à l’heure convenue, sans retard. Chauffeur professionnel, discret et attentif.
              Aide aux bagages et accompagnement si besoin. Paiements acceptés : espèces, CB, Apple Pay, Google Pay, PayPal.
              <strong>Facture sur demande.</strong>
            </p>

            <div class="hero-actions">
              <a class="btn gold" href="#reservation">
                <span data-i18n="hero_cta1">Réserver maintenant</span>
                <span aria-hidden="true">→</span>
              </a>
              <a class="btn secondary" href="#estimation">
                <span data-i18n="hero_cta2">Estimer un trajet</span>
                <span aria-hidden="true">↗</span>
              </a>
              <a class="btn ghost" href="#tarifs">
                <span data-i18n="hero_cta3">Voir la tarification</span>
              </a>
            </div>

            <div class="mini">
              <div class="chip">
                <strong data-i18n="hero_chip1_t">Véhicule</strong><br>
                <span data-i18n="hero_chip1_b">Toyota Corolla break — spacieux, grand coffre — jusqu’à 4 passagers.</span>
              </div>
              <div class="chip">
                <strong data-i18n="hero_chip2_t">Zones</strong><br>
                <span data-i18n="hero_chip2_b">Paris + zone taxi parisien + CDG/Orly/Villepinte (selon règles de tarification).</span>
              </div>
              <div class="chip">
                <strong data-i18n="hero_chip3_t">Longue distance</strong><br>
                <span data-i18n="hero_chip3_b">Orléans, Troyes… et plus : estimation indicative ou devis selon distance.</span>
              </div>
            </div>

            <div class="payRow" aria-label="Paiements acceptés">
              <div class="pay" title="CB / Cartes">
                <!-- Card icon -->
                <svg viewBox="0 0 24 24" fill="none">
                  <rect x="3" y="6" width="18" height="12" rx="3" stroke="rgba(241,216,154,.9)" stroke-width="2"/>
                  <path d="M3 10h18" stroke="rgba(247,246,242,.85)" stroke-width="2"/>
                  <path d="M7 15h5" stroke="rgba(247,246,242,.85)" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span data-i18n="pay_cards">CB • Toutes cartes</span>
              </div>
              <div class="pay" title="Apple Pay">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M10.5 7.2c.7-.9 1.8-1.6 2.9-1.6.1 1-.3 2-.9 2.7-.7.8-1.8 1.5-2.9 1.4-.2-1 .3-1.9.9-2.5Z" fill="rgba(247,246,242,.9)"/>
                  <path d="M12.2 9.6c1.3 0 2.1.7 2.8.7.7 0 1.8-.8 3-.8.5 0 2 .1 3 1.5-.1.1-1.8 1-1.8 3 0 2.3 2 3.1 2 3.1-.1.1-.3 1-1 2-.6.9-1.3 1.8-2.3 1.8-1 0-1.3-.6-2.5-.6s-1.6.6-2.6.6c-1 0-1.8-1-2.4-1.9-1.3-2-2.3-5.7-.9-8.2.7-1.2 2-2 3.3-2Z" fill="rgba(241,216,154,.75)"/>
                </svg>
                <span>Apple Pay</span>
              </div>
              <div class="pay" title="Google Pay">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 12h9c0 5-3.4 9-9 9a9 9 0 1 1 0-18c2.4 0 4.4.9 6 2.4l-2.6 2.6A5.7 5.7 0 0 0 12 7.2c-2.7 0-4.8 2.2-4.8 4.8S9.3 16.8 12 16.8c2.2 0 3.8-1.2 4.3-2.8H12V12Z" fill="rgba(107,188,255,.8)"/>
                  <path d="M21 12h-9v2h4.3c-.4 1.3-1.7 2.8-4.3 2.8-2.7 0-4.8-2.2-4.8-4.8S9.3 7.2 12 7.2c1.5 0 2.6.6 3.4 1.4L18 6c-1.6-1.5-3.6-2.4-6-2.4a9 9 0 1 0 0 18c5.6 0 9-4 9-9Z" fill="rgba(241,216,154,.55)"/>
                </svg>
                <span>Google Pay</span>
              </div>
              <div class="pay" title="PayPal">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M9 20h2.2c1.1 0 2-.8 2.2-1.9l.3-1.6h1.6c3 0 5.4-1.9 6-4.8.7-3.4-1.4-5.7-4.7-5.7H9.7c-.9 0-1.7.7-1.9 1.6L6 20h3Z" fill="rgba(107,188,255,.35)"/>
                  <path d="M10 18h2.1c.9 0 1.7-.6 1.9-1.5l.3-1.6h1.6c2.8 0 5-1.8 5.6-4.4.2-.9.2-1.7 0-2.4-.7 3-3.1 4.8-6 4.8h-1.6l-.3 1.6c-.2 1.1-1.1 1.9-2.2 1.9H9.1l.9-4.8L10 18Z" fill="rgba(241,216,154,.65)"/>
                </svg>
                <span>PayPal</span>
              </div>
            </div>

            <div class="badge" data-i18n="hero_badge">
              Paris intra-muros = Paris “à l’intérieur du périphérique” (les 20 arrondissements).
            </div>
          </div>
        </div>

        <div class="hero-photo reveal">
          <div class="img" aria-hidden="true"></div>
          <div class="overlay">
            <div class="statRow">
              <div class="stat">
                <div class="k" data-i18n="stat1_k">Transferts</div>
                <div class="v">CDG • Orly • Villepinte</div>
              </div>
              <div class="stat">
                <div class="k" data-i18n="stat2_k">Service</div>
                <div class="v" data-i18n="stat2_v">Premium & discret</div>
              </div>
              <div class="stat">
                <div class="k" data-i18n="stat3_k">Option</div>
                <div class="v" data-i18n="stat3_v">Journée sur devis</div>
              </div>
            </div>

            <a class="btn small" href="#reservation">
              <span data-i18n="photo_cta">Demander une prise en charge</span>
              <span aria-hidden="true">→</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- SERVICES -->
  <section id="services">
    <div class="container">
      <div class="section-title">
        <div>
          <h2 class="reveal" data-i18n="services_h2">Services haut de gamme</h2>
          <p class="section-sub reveal" data-i18n="services_p">
            Une expérience simple : réservation claire, conduite souple, et une communication efficace.
            Pour tout besoin spécifique (famille, bagages, horaires serrés), indique-le dans le message.
          </p>
        </div>
      </div>

      <div class="grid-3">
        <div class="card reveal">
          <h3 data-i18n="s1_t">Ponctualité & confort</h3>
          <p data-i18n="s1_p">Prise en charge à l’heure convenue, sans retard. Conduite souple, discrétion et attention.</p>
          <ul class="list">
            <li class="li"><span class="tick">✓</span><span data-i18n="s1_l1">Chauffeur professionnel, discret et attentif</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="s1_l2">Aide aux bagages et accompagnement si besoin</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="s1_l3">Facture sur demande</span></li>
          </ul>
        </div>

        <div class="card reveal">
          <h3 data-i18n="s2_t">Aéroports & gares</h3>
          <p data-i18n="s2_p">CDG / Orly / Villepinte : transferts réguliers, anticipation des horaires, sérénité.</p>
          <ul class="list">
            <li class="li"><span class="tick">✓</span><span data-i18n="s2_l1">CDG ↔ Paris • Orly ↔ Paris</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="s2_l2">CDG ↔ Orly (correspondances)</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="s2_l3">Villepinte (Parc des Expositions)</span></li>
          </ul>
        </div>

        <div class="card reveal">
          <h3 data-i18n="s3_t">Longue distance</h3>
          <p data-i18n="s3_p">Orléans, Troyes… et au-delà. Estimation indicative ou devis selon la distance et le temps.</p>
          <ul class="list">
            <li class="li"><span class="tick">✓</span><span data-i18n="s3_l1">Réservation à la journée : sur devis</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="s3_l2">Paiement CB / sans contact</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="s3_l3">Message rapide via le formulaire</span></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- TARIFS -->
  <section id="tarifs">
    <div class="container">
      <div class="section-title">
        <div>
          <h2 class="reveal" data-i18n="tarifs_h2">Tarification expliquée aux clients</h2>
          <p class="section-sub reveal" data-i18n="tarifs_p">
            Dans la zone du taxi parisien (Paris + zone bleue + CDG/Orly/Villepinte), des règles spécifiques s’appliquent.
            En dehors, la course est au taximètre et peut inclure un compteur d’approche (selon distance et circulation).
          </p>
        </div>
      </div>

      <div class="split">
        <div class="card reveal">
          <h3 data-i18n="tarifs_bloc1_t">Réservation</h3>
          <table class="table" role="table" aria-label="Réservation">
            <thead>
              <tr>
                <th data-i18n="tarifs_th1">Type</th>
                <th data-i18n="tarifs_th2">Montant</th>
                <th data-i18n="tarifs_th3">Condition</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-i18n="t_res_immed">Réservation immédiate</td>
                <td class="price">4€</td>
                <td data-i18n="t_res_immed_c">Commande et prise en charge dans ~15 min</td>
              </tr>
              <tr>
                <td data-i18n="t_res_adv">Réservation à l’avance</td>
                <td class="price">7€</td>
                <td data-i18n="t_res_adv_c">Ex : aujourd’hui pour demain</td>
              </tr>
            </tbody>
          </table>
          <div class="badge" data-i18n="tarifs_note_zone">
            Important : 4€ / 7€ s’applique uniquement dans la zone du taxi parisien.
          </div>
        </div>

        <div class="card reveal">
          <h3 data-i18n="tarifs_bloc2_t">Forfaits aéroports (Paris intra-muros)</h3>
          <table class="table" role="table" aria-label="Forfaits aéroports">
            <thead>
              <tr>
                <th data-i18n="t_forfait_trajet">Trajet</th>
                <th data-i18n="t_forfait_prix">Prix</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-i18n="t_cdg_rd">CDG ↔ Paris rive droite</td>
                <td class="price">56€</td>
              </tr>
              <tr>
                <td data-i18n="t_cdg_rg">CDG ↔ Paris rive gauche</td>
                <td class="price">65€</td>
              </tr>
              <tr>
                <td data-i18n="t_orly_rd">Orly ↔ Paris rive droite</td>
                <td class="price">45€</td>
              </tr>
              <tr>
                <td data-i18n="t_orly_rg">Orly ↔ Paris rive gauche</td>
                <td class="price">36€</td>
              </tr>
            </tbody>
          </table>
          <div class="badge" data-i18n="tarifs_note_traffic">
            Les montants affichés concernent les règles de forfait. La circulation peut impacter le temps, pas le forfait.
          </div>
        </div>
      </div>

      <div class="card reveal" style="margin-top:14px">
        <h3 data-i18n="tarifs_out_t">Hors zone taxi parisien : taximètre + compteur d’approche (si applicable)</h3>
        <p class="muted" data-i18n="tarifs_out_p">
          Hors zone, le tarif d’approche dépend de la localisation du taxi au moment de la demande et de la distance jusqu’à l’adresse.
          Plus le taxi est éloigné, plus le compteur d’approche peut être élevé. Les estimations sont indicatives et dépendent notamment des embouteillages.
        </p>

        <div class="alert" style="margin-top:12px">
          <strong data-i18n="tarifs_out_ex_t">Exemple (indicatif) :</strong>
          <span data-i18n="tarifs_out_ex_b">Beauvais → Paris (ou CDG/Orly) : un compteur d’approche peut être estimé entre 100€ et 120€ selon la situation.</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ESTIMATION -->
  <section id="estimation">
    <div class="container">
      <div class="section-title">
        <div>
          <h2 class="reveal" data-i18n="est_h2">Estimation (fourchette) — distance & temps</h2>
          <p class="section-sub reveal" data-i18n="est_p">
            Cette estimation est indicative : elle se base sur la distance et le temps (Google). Le prix final dépend de la circulation, des conditions réelles et des règles applicables (zone taxi parisien / hors zone).
          </p>
        </div>
      </div>

      <div class="split">
        <div class="card reveal">
          <h3 data-i18n="est_form_t">Calculer un trajet</h3>

          <div class="field">
            <label for="pickup" data-i18n="f_pickup">Adresse de prise en charge</label>
            <input id="pickup" placeholder="Ex : 8 Rue de Rivoli, Paris" autocomplete="off" />
          </div>

          <div class="field">
            <label for="dropoff" data-i18n="f_dropoff">Destination</label>
            <input id="dropoff" placeholder="Ex : Aéroport CDG" autocomplete="off" />
          </div>

          <div class="split">
            <div class="field">
              <label for="when" data-i18n="f_when">Date & heure</label>
              <input id="when" type="datetime-local" />
              <div class="hint" data-i18n="f_when_hint">Pour la réservation immédiate : prise en charge ~15 min.</div>
            </div>
            <div class="field">
              <label for="pax" data-i18n="f_pax">Passagers</label>
              <select id="pax">
                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
              </select>
              <div class="hint" data-i18n="f_pax_hint">Véhicule jusqu’à 4 passagers.</div>
            </div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:6px">
            <button class="btn gold" id="btnEstimate" type="button">
              <span data-i18n="btn_est">Estimer</span> <span aria-hidden="true">↗</span>
            </button>
            <button class="btn secondary" id="btnLocate" type="button">
              <span data-i18n="btn_loc">Utiliser ma position</span>
            </button>
            <button class="btn ghost" id="btnClear" type="button">
              <span data-i18n="btn_clear">Effacer</span>
            </button>
          </div>

          <div class="result" id="result" style="display:none">
            <div class="row">
              <div>
                <div class="k" data-i18n="r_distance">Distance</div>
                <div class="v" id="rDistance">—</div>
              </div>
              <div>
                <div class="k" data-i18n="r_time">Temps estimé</div>
                <div class="v" id="rTime">—</div>
              </div>
            </div>

            <div class="row">
              <div>
                <div class="k" data-i18n="r_zone">Règle appliquée</div>
                <div class="v" id="rRule">—</div>
              </div>
              <div>
                <div class="k" data-i18n="r_bookingfee">Frais de réservation</div>
                <div class="v" id="rBookFee">—</div>
              </div>
            </div>

            <div class="row">
              <div>
                <div class="k" data-i18n="r_price">Estimation (fourchette)</div>
                <div class="v" id="rPrice">—</div>
              </div>
              <div>
                <div class="k" data-i18n="r_action">Action</div>
                <div class="v" id="rAction">—</div>
              </div>
            </div>

            <div class="note" id="rNote">—</div>
          </div>

          <div class="alert" style="margin-top:12px">
            <strong data-i18n="est_rules_t">Rappels :</strong>
            <span data-i18n="est_rules_b">
              4€ (immédiat) ou 7€ (à l’avance) uniquement dans la zone taxi parisien. Hors zone : taximètre + possible compteur d’approche.
              Au-delà de 80 km : devis recommandé.
            </span>
          </div>
        </div>

        <div class="card reveal">
          <h3 data-i18n="est_map_t">Carte (zone + localisation)</h3>
          <p class="muted" data-i18n="est_map_p">
            La carte affiche votre position (si autorisée), et une zone indicative. Pour une précision totale, la décision finale dépend des règles en vigueur et des communes exactes.
          </p>

          <div class="mapWrap" aria-label="Carte Google">
            <div id="map"></div>
          </div>

          <div class="badge" data-i18n="map_badge">
            Astuce : si la carte est vide, vérifie la clé API (restriction “Sites Web” + APIs activées).
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CARTE + VISUEL ZONE -->
  <section id="carte">
    <div class="container">
      <div class="section-title">
        <div>
          <h2 class="reveal" data-i18n="zone_h2">Zone taxi parisien</h2>
          <p class="section-sub reveal" data-i18n="zone_p">
            Dans cette zone, les règles de réservation (4€ / 7€) s’appliquent. En dehors : taximètre + éventuel compteur d’approche selon distance et circulation.
          </p>
        </div>
      </div>

      <div class="split">
        <div class="imgCard reveal">
          <!-- IMPORTANT : mets l’image dans ton repo dans /assets/zone-taxi-parisien.png -->
          <img src="assets/zone-taxi-parisien.png" alt="Carte zone taxi parisien (Paris en rouge, zone en bleu)" />
        </div>

        <div class="card reveal">
          <h3 data-i18n="zone_info_t">Information clients</h3>
          <p class="muted" data-i18n="zone_info_p">
            La tarification varie selon la zone et l’itinéraire. L’estimation ci-dessus est indicative (distance + temps).
            Les embouteillages, travaux et conditions réelles peuvent modifier le temps et parfois l’approche hors zone.
          </p>
          <ul class="list">
            <li class="li"><span class="tick">✓</span><span data-i18n="zone_l1">Paris (intra-muros) est en rouge</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="zone_l2">La zone taxi parisien est en bleu</span></li>
            <li class="li"><span class="tick">✓</span><span data-i18n="zone_l3">CDG / Orly / Villepinte sont inclus pour l’estimation</span></li>
          </ul>
          <div class="badge" data-i18n="zone_note">
            Si votre prise en charge est hors zone, un devis peut être proposé.
          </div>
        </div>
      </div>

      <div class="imgCard reveal" style="margin-top:14px">
        <!-- IMPORTANT : mets l’image “barème” dans /assets/bareme-approche.png -->
        <img src="assets/bareme-approche.png" alt="Barème estimatif des compteurs d’approche (exemple)" />
      </div>
    </div>
  </section>

  <!-- RESERVATION -->
  <section id="reservation">
    <div class="container">
      <div class="section-title">
        <div>
          <h2 class="reveal" data-i18n="book_h2">Réservation</h2>
          <p class="section-sub reveal" data-i18n="book_p">
            Remplis le formulaire : nom, prénom, contact, adresses, date/heure et message. Je te confirme rapidement.
            Pour une réservation à la journée : sélectionne “Journée (devis)”.
          </p>
        </div>
      </div>

      <div class="split">
        <div class="card reveal">
          <h3 data-i18n="book_form_t">Formulaire</h3>

          <div class="split">
            <div class="field">
              <label for="lname" data-i18n="f_lname">Nom</label>
              <input id="lname" placeholder="Nom" />
            </div>
            <div class="field">
              <label for="fname" data-i18n="f_fname">Prénom</label>
              <input id="fname" placeholder="Prénom" />
            </div>
          </div>

          <div class="split">
            <div class="field">
              <label for="phone" data-i18n="f_phone">Téléphone</label>
              <input id="phone" placeholder="+33 ..." />
            </div>
            <div class="field">
              <label for="email" data-i18n="f_email">Email (optionnel)</label>
              <input id="email" placeholder="email@exemple.com" />
            </div>
          </div>

          <div class="field">
            <label for="b_pickup" data-i18n="f_pickup">Adresse de prise en charge</label>
            <input id="b_pickup" placeholder="Adresse complète" autocomplete="off" />
          </div>

          <div class="field">
            <label for="b_dropoff" data-i18n="f_dropoff">Destination</label>
            <input id="b_dropoff" placeholder="Destination" autocomplete="off" />
          </div>

          <div class="split">
            <div class="field">
              <label for="b_when" data-i18n="f_when">Date & heure</label>
              <input id="b_when" type="datetime-local" />
            </div>
            <div class="field">
              <label for="b_type" data-i18n="f_type">Type</label>
              <select id="b_type">
                <option value="course" data-i18n="type_course">Course</option>
                <option value="day" data-i18n="type_day">Journée (devis)</option>
              </select>
            </div>
          </div>

          <div class="split">
            <div class="field">
              <label for="b_pax" data-i18n="f_pax">Passagers</label>
              <select id="b_pax">
                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
              </select>
            </div>
            <div class="field">
              <label for="b_bags" data-i18n="f_bags">Bagages</label>
              <select id="b_bags">
                <option value="0" data-i18n="bags_0">0</option>
                <option value="1" data-i18n="bags_1">1–2</option>
                <option value="2" data-i18n="bags_2">3–4</option>
                <option value="3" data-i18n="bags_3">+4</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label for="msg" data-i18n="f_msg">Message</label>
            <textarea id="msg" placeholder="Ex : vol AF123, besoin d’aide bagages, siège enfant, etc."></textarea>
            <div class="hint" data-i18n="f_msg_hint">Plus c’est précis, plus je confirme vite.</div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn gold" id="btnSend" type="button">
              <span data-i18n="btn_send">Envoyer la demande</span> <span aria-hidden="true">→</span>
            </button>
            <a class="btn secondary" id="btnWhatsApp" href="#" target="_blank" rel="noopener">
              <span>WhatsApp</span> <span aria-hidden="true">↗</span>
            </a>
          </div>

          <div class="badge" data-i18n="book_badge">
            Paiements : espèces, CB toutes cartes, Apple Pay, Google Pay, PayPal — Facture sur demande.
          </div>
        </div>

        <div class="card reveal" id="contact">
          <h3 data-i18n="contact_t">Contact</h3>
          <p class="muted" data-i18n="contact_p">
            Mets ici ton numéro et ton email (modifiables dans le code). Ajoute aussi ton lien Google Business quand il est prêt.
          </p>

          <div class="alert" style="margin-top:10px">
            <strong data-i18n="contact_phone_t">Téléphone :</strong> <span id="displayPhone" class="ok">à renseigner</span><br>
            <strong data-i18n="contact_email_t">Email :</strong> <span id="displayEmail" class="ok">à renseigner</span><br>
            <strong data-i18n="contact_gmb_t">Google My Business :</strong> <span class="ok" id="displayGMB">à renseigner</span>
          </div>

          <div class="imgCard" style="margin-top:12px">
            <img src="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?auto=format&fit=crop&w=1600&q=70" alt="Paris de nuit" />
          </div>

          <div class="badge" data-i18n="contact_note">
            Les estimations sont indicatives et dépendent notamment de la circulation.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SEO TEXT (visible mais sobre) -->
  <section id="seo">
    <div class="container">
      <div class="card reveal">
        <h2 data-i18n="seo_h2">Taxi Paris & Île-de-France</h2>
        <p class="muted" data-i18n="seo_p1">
          Taxi Paris Karim propose des trajets professionnels et réglementés à Paris et en Île-de-France : transferts CDG, Orly, Villepinte, Versailles, et correspondances CDG ↔ Orly.
          Pour Beauvais : Paris → Beauvais, Orly → Beauvais, CDG → Beauvais (estimation indicative), et Beauvais → Paris (compteur d’approche indicatif selon disponibilité).
        </p>
        <p class="muted" data-i18n="seo_p2">
          Les longues distances (Orléans, Troyes…) peuvent être estimées selon distance et temps, mais un devis est recommandé au-delà de 80 km.
          Hors zone taxi parisien, la course est au taximètre et peut inclure un compteur d’approche.
        </p>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="footGrid">
        <div class="small">
          <strong>Taxi Paris Karim</strong><br>
          <span data-i18n="foot1">Service premium — Paris & Île-de-France • CDG • Orly • Villepinte • Versailles</span><br><br>
          <span data-i18n="foot2">© <span id="year"></span> — Tous droits réservés.</span>
        </div>
        <div class="links">
          <a href="#reservation" data-i18n="foot_link1">Réservation</a>
          <a href="#tarifs" data-i18n="foot_link2">Tarifs</a>
          <a href="#estimation" data-i18n="foot_link3">Estimation</a>
          <a href="#carte" data-i18n="foot_link4">Zone</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // ----------------------------
    // CONFIG (à personnaliser)
    // ----------------------------
    const CONFIG = {
      phoneE164: "+33600000000",            // <-- Mets TON numéro ici (format +33...)
      email: "contact@exemple.com",         // <-- Mets TON email ici
      gmbUrl: "https://g.page/r/XXXXX",      // <-- Mets ton lien Google Business ici

      // Estimation : règles
      bookingImmediateMinutes: 15,
      bookingFeeImmediate: 4,
      bookingFeeAdvance: 7,

      // Vémars (95470) : estimation possible dans un rayon de 15 km (logique interne, pas affiché)
      vemarsLat: 49.0696,
      vemarsLng: 2.5677,
      vemarsRadiusKm: 15,

      // Beauvais approche (indicatif) seulement Beauvais -> (Paris/CDG/Orly...)
      beauvaisApproachMin: 100,
      beauvaisApproachMax: 120,

      // Seuil devis long trajet
      longTripKmThreshold: 80
    };

    // ----------------------------
    // Drawer menu
    // ----------------------------
    const drawer = document.getElementById('drawer');
    const openDrawerBtn = document.getElementById('openDrawer');
    const closeDrawerBtn = document.getElementById('closeDrawer');

    function openDrawer(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden', 'false'); }
    function closeDrawer(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden', 'true'); }

    openDrawerBtn?.addEventListener('click', openDrawer);
    closeDrawerBtn?.addEventListener('click', closeDrawer);
    drawer?.addEventListener('click', (e) => { if(e.target === drawer) closeDrawer(); });

    // ----------------------------
    // Reveal on scroll
    // ----------------------------
    const io = new IntersectionObserver((entries)=>{
      for(const en of entries){
        if(en.isIntersecting){
          en.target.classList.add('in');
          io.unobserve(en.target);
        }
      }
    }, {threshold:.12});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Contact display
    document.getElementById('displayPhone').textContent = CONFIG.phoneE164;
    document.getElementById('displayEmail').textContent = CONFIG.email;
    document.getElementById('displayGMB').innerHTML = CONFIG.gmbUrl ? `<a href="${CONFIG.gmbUrl}" target="_blank" rel="noopener">${CONFIG.gmbUrl}</a>` : "à renseigner";

    // WhatsApp link
    const wa = document.getElementById('btnWhatsApp');
    const waText = encodeURIComponent("Bonjour, je souhaite réserver un taxi. ");
    wa.href = `https://wa.me/${CONFIG.phoneE164.replace(/\D/g,'')}?text=${waText}`;

    // ----------------------------
    // i18n (FR / EN / AR)
    // ----------------------------
    const I18N = {
      fr: {
        nav_sub:"Menu",
        brand_sub:"Service premium — Paris & Île-de-France",
        nav_services:"Services",
        nav_tarifs:"Tarification",
        nav_estimation:"Estimation",
        nav_map:"Carte",
        nav_booking:"Réservation",
        nav_contact:"Contact",
        drawer_tip_t:"Astuce :",
        drawer_tip_b:"tu peux tout gérer depuis iPhone (édition du fichier + commit).",

        hero_pill:"Ponctualité • Discrétion • Confort",
        hero_h1:"Taxi premium à Paris & Île-de-France — CDG, Orly, Villepinte, Versailles",
        hero_lead:"Une prise en charge à l’heure convenue, sans retard. Chauffeur professionnel, discret et attentif. Aide aux bagages et accompagnement si besoin. Paiements acceptés : espèces, CB, Apple Pay, Google Pay, PayPal. Facture sur demande.",
        hero_cta1:"Réserver maintenant",
        hero_cta2:"Estimer un trajet",
        hero_cta3:"Voir la tarification",
        hero_chip1_t:"Véhicule",
        hero_chip1_b:"Toyota Corolla break — spacieux, grand coffre — jusqu’à 4 passagers.",
        hero_chip2_t:"Zones",
        hero_chip2_b:"Paris + zone taxi parisien + CDG/Orly/Villepinte (selon règles de tarification).",
        hero_chip3_t:"Longue distance",
        hero_chip3_b:"Orléans, Troyes… et plus : estimation indicative ou devis selon distance.",
        pay_cards:"CB • Toutes cartes",
        hero_badge:"Paris intra-muros = Paris “à l’intérieur du périphérique” (les 20 arrondissements).",
        photo_cta:"Demander une prise en charge",
        stat1_k:"Transferts",
        stat2_k:"Service",
        stat2_v:"Premium & discret",
        stat3_k:"Option",
        stat3_v:"Journée sur devis",

        services_h2:"Services haut de gamme",
        services_p:"Une expérience simple : réservation claire, conduite souple, et une communication efficace. Pour tout besoin spécifique (famille, bagages, horaires serrés), indique-le dans le message.",
        s1_t:"Ponctualité & confort",
        s1_p:"Prise en charge à l’heure convenue, sans retard. Conduite souple, discrétion et attention.",
        s1_l1:"Chauffeur professionnel, discret et attentif",
        s1_l2:"Aide aux bagages et accompagnement si besoin",
        s1_l3:"Facture sur demande",
        s2_t:"Aéroports & gares",
        s2_p:"CDG / Orly / Villepinte : transferts réguliers, anticipation des horaires, sérénité.",
        s2_l1:"CDG ↔ Paris • Orly ↔ Paris",
        s2_l2:"CDG ↔ Orly (correspondances)",
        s2_l3:"Villepinte (Parc des Expositions)",
        s3_t:"Longue distance",
        s3_p:"Orléans, Troyes… et au-delà. Estimation indicative ou devis selon la distance et le temps.",
        s3_l1:"Réservation à la journée : sur devis",
        s3_l2:"Paiement CB / sans contact",
        s3_l3:"Message rapide via le formulaire",

        tarifs_h2:"Tarification expliquée aux clients",
        tarifs_p:"Dans la zone du taxi parisien (Paris + zone bleue + CDG/Orly/Villepinte), des règles spécifiques s’appliquent. En dehors, la course est au taximètre et peut inclure un compteur d’approche (selon distance et circulation).",
        tarifs_bloc1_t:"Réservation",
        tarifs_th1:"Type",
        tarifs_th2:"Montant",
        tarifs_th3:"Condition",
        t_res_immed:"Réservation immédiate",
        t_res_immed_c:"Commande et prise en charge dans ~15 min",
        t_res_adv:"Réservation à l’avance",
        t_res_adv_c:"Ex : aujourd’hui pour demain",
        tarifs_note_zone:"Important : 4€ / 7€ s’applique uniquement dans la zone du taxi parisien.",
        tarifs_bloc2_t:"Forfaits aéroports (Paris intra-muros)",
        t_forfait_trajet:"Trajet",
        t_forfait_prix:"Prix",
        t_cdg_rd:"CDG ↔ Paris rive droite",
        t_cdg_rg:"CDG ↔ Paris rive gauche",
        t_orly_rd:"Orly ↔ Paris rive droite",
        t_orly_rg:"Orly ↔ Paris rive gauche",
        tarifs_note_traffic:"Les montants affichés concernent les règles de forfait. La circulation peut impacter le temps, pas le forfait.",
        tarifs_out_t:"Hors zone taxi parisien : taximètre + compteur d’approche (si applicable)",
        tarifs_out_p:"Hors zone, le tarif d’approche dépend de la localisation du taxi au moment de la demande et de la distance jusqu’à l’adresse. Plus le taxi est éloigné, plus le compteur d’approche peut être élevé. Les estimations sont indicatives et dépendent notamment des embouteillages.",
        tarifs_out_ex_t:"Exemple (indicatif) :",
        tarifs_out_ex_b:"Beauvais → Paris (ou CDG/Orly) : un compteur d’approche peut être estimé entre 100€ et 120€ selon la situation.",

        est_h2:"Estimation (fourchette) — distance & temps",
        est_p:"Cette estimation est indicative : elle se base sur la distance et le temps (Google). Le prix final dépend de la circulation, des conditions réelles et des règles applicables (zone taxi parisien / hors zone).",
        est_form_t:"Calculer un trajet",
        f_pickup:"Adresse de prise en charge",
        f_dropoff:"Destination",
        f_when:"Date & heure",
        f_when_hint:"Pour la réservation immédiate : prise en charge ~15 min.",
        f_pax:"Passagers",
        f_pax_hint:"Véhicule jusqu’à 4 passagers.",
        btn_est:"Estimer",
        btn_loc:"Utiliser ma position",
        btn_clear:"Effacer",
        r_distance:"Distance",
        r_time:"Temps estimé",
        r_zone:"Règle appliquée",
        r_bookingfee:"Frais de réservation",
        r_price:"Estimation (fourchette)",
        r_action:"Action",
        est_rules_t:"Rappels :",
        est_rules_b:"4€ (immédiat) ou 7€ (à l’avance) uniquement dans la zone taxi parisien. Hors zone : taximètre + possible compteur d’approche. Au-delà de 80 km : devis recommandé.",
        est_map_t:"Carte (zone + localisation)",
        est_map_p:"La carte affiche votre position (si autorisée), et une zone indicative. Pour une précision totale, la décision finale dépend des règles en vigueur et des communes exactes.",
        map_badge:"Astuce : si la carte est vide, vérifie la clé API (restriction “Sites Web” + APIs activées).",

        zone_h2:"Zone taxi parisien",
        zone_p:"Dans cette zone, les règles de réservation (4€ / 7€) s’appliquent. En dehors : taximètre + éventuel compteur d’approche selon distance et circulation.",
        zone_info_t:"Information clients",
        zone_info_p:"La tarification varie selon la zone et l’itinéraire. L’estimation ci-dessus est indicative (distance + temps). Les embouteillages, travaux et conditions réelles peuvent modifier le temps et parfois l’approche hors zone.",
        zone_l1:"Paris (intra-muros) est en rouge",
        zone_l2:"La zone taxi parisien est en bleu",
        zone_l3:"CDG / Orly / Villepinte sont inclus pour l’estimation",
        zone_note:"Si votre prise en charge est hors zone, un devis peut être proposé.",

        book_h2:"Réservation",
        book_p:"Remplis le formulaire : nom, prénom, contact, adresses, date/heure et message. Je te confirme rapidement. Pour une réservation à la journée : sélectionne “Journée (devis)”.",
        book_form_t:"Formulaire",
        f_lname:"Nom",
        f_fname:"Prénom",
        f_phone:"Téléphone",
        f_email:"Email (optionnel)",
        f_type:"Type",
        type_course:"Course",
        type_day:"Journée (devis)",
        f_bags:"Bagages",
        bags_0:"0",
        bags_1:"1–2",
        bags_2:"3–4",
        bags_3:"+4",
        f_msg:"Message",
        f_msg_hint:"Plus c’est précis, plus je confirme vite.",
        btn_send:"Envoyer la demande",
        book_badge:"Paiements : espèces, CB toutes cartes, Apple Pay, Google Pay, PayPal — Facture sur demande.",

        contact_t:"Contact",
        contact_p:"Mets ici ton numéro et ton email (modifiables dans le code). Ajoute aussi ton lien Google Business quand il est prêt.",
        contact_phone_t:"Téléphone :",
        contact_email_t:"Email :",
        contact_gmb_t:"Google My Business :",
        contact_note:"Les estimations sont indicatives et dépendent notamment de la circulation.",

        seo_h2:"Taxi Paris & Île-de-France",
        seo_p1:"Taxi Paris Karim propose des trajets professionnels et réglementés à Paris et en Île-de-France : transferts CDG, Orly, Villepinte, Versailles, et correspondances CDG ↔ Orly. Pour Beauvais : Paris → Beauvais, Orly → Beauvais, CDG → Beauvais (estimation indicative), et Beauvais → Paris (compteur d’approche indicatif selon disponibilité).",
        seo_p2:"Les longues distances (Orléans, Troyes…) peuvent être estimées selon distance et temps, mais un devis est recommandé au-delà de 80 km. Hors zone taxi parisien, la course est au taximètre et peut inclure un compteur d’approche.",

        foot1:"Service premium — Paris & Île-de-France • CDG • Orly • Villepinte • Versailles",
        foot2:"© {year} — Tous droits réservés.",
        foot_link1:"Réservation",
        foot_link2:"Tarifs",
        foot_link3:"Estimation",
        foot_link4:"Zone"
      },

      en: {
        nav_sub:"Menu",
        brand_sub:"Premium service — Paris & Île-de-France",
        nav_services:"Services",
        nav_tarifs:"Pricing",
        nav_estimation:"Estimate",
        nav_map:"Map",
        nav_booking:"Booking",
        nav_contact:"Contact",
        drawer_tip_t:"Tip:",
        drawer_tip_b:"you can manage everything from iPhone (edit + commit).",

        hero_pill:"Punctual • Discreet • Comfortable",
        hero_h1:"Premium taxi in Paris & Île-de-France — CDG, Orly, Villepinte, Versailles",
        hero_lead:"On-time pickup, no delays. Professional, discreet driver. Luggage help if needed. Payments: cash, cards, Apple Pay, Google Pay, PayPal. Invoice on request.",
        hero_cta1:"Book now",
        hero_cta2:"Estimate a ride",
        hero_cta3:"View pricing",
        hero_chip1_t:"Vehicle",
        hero_chip1_b:"Toyota Corolla wagon — spacious, large trunk — up to 4 passengers.",
        hero_chip2_t:"Areas",
        hero_chip2_b:"Paris + taxi zone + CDG/Orly/Villepinte (pricing rules apply).",
        hero_chip3_t:"Long distance",
        hero_chip3_b:"Orléans, Troyes… and more: indicative estimate or quote.",
        pay_cards:"Cards • All types",
        hero_badge:"Paris intra-muros = inside the ring road (20 districts).",
        photo_cta:"Request pickup",
        stat1_k:"Transfers",
        stat2_k:"Service",
        stat2_v:"Premium & discreet",
        stat3_k:"Option",
        stat3_v:"Full-day quote",

        services_h2:"High-end services",
        services_p:"Simple experience: clear booking, smooth driving, efficient communication. Mention any special needs in the message.",
        s1_t:"Punctuality & comfort",
        s1_p:"On-time pickup, smooth driving, discretion and care.",
        s1_l1:"Professional, discreet driver",
        s1_l2:"Luggage assistance",
        s1_l3:"Invoice on request",
        s2_t:"Airports & stations",
        s2_p:"CDG / Orly / Villepinte: frequent transfers, peace of mind.",
        s2_l1:"CDG ↔ Paris • Orly ↔ Paris",
        s2_l2:"CDG ↔ Orly connections",
        s2_l3:"Villepinte exhibition center",
        s3_t:"Long distance",
        s3_p:"Orléans, Troyes… and beyond. Indicative estimate or quote depending on distance and time.",
        s3_l1:"Full-day booking: quote",
        s3_l2:"Card / contactless payment",
        s3_l3:"Quick message via form",

        tarifs_h2:"Pricing explained",
        tarifs_p:"Within the Paris taxi zone (Paris + blue zone + CDG/Orly/Villepinte), specific rules apply. Outside: taximeter + possible approach meter (distance & traffic).",
        tarifs_bloc1_t:"Booking fees",
        tarifs_th1:"Type",
        tarifs_th2:"Amount",
        tarifs_th3:"Condition",
        t_res_immed:"Immediate booking",
        t_res_immed_c:"Pickup within ~15 min",
        t_res_adv:"Advance booking",
        t_res_adv_c:"Example: today for tomorrow",
        tarifs_note_zone:"Important: 4€ / 7€ applies only within the Paris taxi zone.",
        tarifs_bloc2_t:"Airport flat fares (Paris intra-muros)",
        t_forfait_trajet:"Route",
        t_forfait_prix:"Price",
        t_cdg_rd:"CDG ↔ Paris Right Bank",
        t_cdg_rg:"CDG ↔ Paris Left Bank",
        t_orly_rd:"Orly ↔ Paris Right Bank",
        t_orly_rg:"Orly ↔ Paris Left Bank",
        tarifs_note_traffic:"Flat fares follow regulations. Traffic affects time, not the flat fare.",
        tarifs_out_t:"Outside zone: taximeter + approach meter (if applicable)",
        tarifs_out_p:"Outside the zone, the approach meter depends on taxi location at the time and the distance to your pickup. Estimates are indicative and traffic-dependent.",
        tarifs_out_ex_t:"Example (indicative):",
        tarifs_out_ex_b:"Beauvais → Paris (or CDG/Orly): approach meter may be estimated between €100 and €120 depending on the situation.",

        est_h2:"Estimate (range) — distance & time",
        est_p:"Indicative estimate based on distance and time (Google). Final price depends on traffic, real conditions and zone rules.",
        est_form_t:"Calculate a route",
        f_pickup:"Pickup address",
        f_dropoff:"Destination",
        f_when:"Date & time",
        f_when_hint:"For immediate booking: pickup ~15 min.",
        f_pax:"Passengers",
        f_pax_hint:"Up to 4 passengers.",
        btn_est:"Estimate",
        btn_loc:"Use my location",
        btn_clear:"Clear",
        r_distance:"Distance",
        r_time:"Estimated time",
        r_zone:"Rule applied",
        r_bookingfee:"Booking fee",
        r_price:"Estimate (range)",
        r_action:"Action",
        est_rules_t:"Reminders:",
        est_rules_b:"4€ (immediate) or 7€ (advance) only within the Paris taxi zone. Outside: taximeter + possible approach meter. Over 80 km: quote recommended.",
        est_map_t:"Map (zone + location)",
        est_map_p:"The map shows your location (if allowed) and an indicative zone. Exact rules depend on official boundaries.",
        map_badge:"Tip: if the map is blank, check API key (Web restriction + APIs enabled).",

        zone_h2:"Paris taxi zone",
        zone_p:"In this zone, booking rules (4€/7€) apply. Outside: taximeter + possible approach meter.",
        zone_info_t:"Customer info",
        zone_info_p:"Pricing depends on zone and route. Estimates are indicative (distance + time). Traffic may change time and sometimes approach outside the zone.",
        zone_l1:"Paris (intra-muros) is shown in red",
        zone_l2:"Paris taxi zone is shown in blue",
        zone_l3:"CDG / Orly / Villepinte included for estimation",
        zone_note:"If pickup is outside zone, a quote may be proposed.",

        book_h2:"Booking",
        book_p:"Fill the form: name, contact, addresses, date/time and message. Fast confirmation. For full-day booking: select “Full-day (quote)”.",
        book_form_t:"Form",
        f_lname:"Last name",
        f_fname:"First name",
        f_phone:"Phone",
        f_email:"Email (optional)",
        f_type:"Type",
        type_course:"Ride",
        type_day:"Full-day (quote)",
        f_bags:"Luggage",
        bags_0:"0",
        bags_1:"1–2",
        bags_2:"3–4",
        bags_3:"+4",
        f_msg:"Message",
        f_msg_hint:"The more precise, the faster the confirmation.",
        btn_send:"Send request",
        book_badge:"Payments: cash, all cards, Apple Pay, Google Pay, PayPal — Invoice on request.",

        contact_t:"Contact",
        contact_p:"Set your phone/email inside the code and add your Google Business link when ready.",
        contact_phone_t:"Phone:",
        contact_email_t:"Email:",
        contact_gmb_t:"Google Business:",
        contact_note:"Estimates are indicative and traffic-dependent.",

        seo_h2:"Taxi in Paris & Île-de-France",
        seo_p1:"Taxi Paris Karim provides professional rides in Paris and Île-de-France: CDG, Orly, Villepinte, Versailles and CDG ↔ Orly connections. Beauvais: Paris → Beauvais, Orly → Beauvais, CDG → Beauvais (indicative estimate), and Beauvais → Paris (approach meter indicative).",
        seo_p2:"Long distance (Orléans, Troyes…) can be estimated based on distance/time, but a quote is recommended over 80 km. Outside zone: taximeter + possible approach meter.",

        foot1:"Premium service — Paris & Île-de-France • CDG • Orly • Villepinte • Versailles",
        foot2:"© {year} — All rights reserved.",
        foot_link1:"Booking",
        foot_link2:"Pricing",
        foot_link3:"Estimate",
        foot_link4:"Zone"
      },

      es: {
        nav_sub: "Menú",
        brand_sub: "Servicio premium — París e Île-de-France",
        nav_services: "Servicios",
    nav_tarifs: "Tarifas",
    nav_estimation: "Estimación",
    nav_map: "Mapa",
    nav_booking: "Reserva",
    nav_contact: "Contacto",

    drawer_tip_t: "Consejo:",
    drawer_tip_b: "Puedes gestionar todo fácilmente desde tu iPhone.",

    hero_pill: "Puntualidad • Discreción • Confort",
    hero_h1: "Taxi premium en París e Île-de-France",
    hero_lead:
      "Recogida a la hora acordada, sin retrasos. Conductor profesional, discreto y atento. Ayuda con el equipaje y acompañamiento si lo necesitas.",
    hero_cta1: "Reservar ahora",
    hero_cta2: "Estimar un trayecto",
    hero_cta3: "Ver tarifas",

    // Trust / Highlights
    perks_title: "Una experiencia premium, sin estrés",
    perk_1_t: "A la hora acordada",
    perk_1_b: "Recogida puntual, sin esperas.",
    perk_2_t: "Conductor profesional",
    perk_2_b: "Discreto, atento y orientado al servicio.",
    perk_3_t: "Equipaje y asistencia",
    perk_3_b: "Ayuda con maletas y acompañamiento si hace falta.",
    perk_4_t: "Confort y seguridad",
    perk_4_b: "Conducción suave, vehículo limpio y confortable.",

    // Vehicle
    vehicle_title: "Vehículo",
    vehicle_text:
      "Toyota Corolla híbrido (break), espacioso y cómodo. Buen maletero. Hasta 4 pasajeros.",

    // Payments
    payments_title: "Pagos",
    payments_text: "Tarjeta bancaria, sin contacto, Apple Pay, Google Pay.",
    invoice_text: "Factura a solicitud.",

    // Services
    services_title: "Servicios",
    services_lead:
      "Traslados en París e Île-de-France: aeropuertos, estaciones, hoteles, citas profesionales y largos recorridos.",
    services_airports_t: "Aeropuertos",
    services_airports_b:
      "CDG y Orly: traslados fiables, con atención premium.",
    services_stations_t: "Estaciones",
    services_stations_b:
      "Gare du Nord, Lyon, Montparnasse, Saint-Lazare…",
    services_business_t: "Negocios",
    services_business_b:
      "Servicio discreto para reuniones, eventos y clientes VIP.",
    services_long_t: "Largos recorridos",
    services_long_b:
      "Orléans, Troyes y más: presupuesto bajo demanda según distancia/tiempo.",

    // Tarification section
    tarifs_title: "Tarifas",
    tarifs_intro:
      "Las tarifas dependen de la reglamentación y de las condiciones de circulación. Para trayectos fuera de zona o largos recorridos, se propone presupuesto.",
    tarifs_table_title: "Tarifas indicativas (París / taxi parisino)",
    tarifs_note:
      "Indicativo: puede variar según tráfico, tiempo de espera y condiciones reales.",

    // Zone + approach pricing info
    zone_title: "Zona taxi parisino",
    zone_text:
      "La zona del taxi parisino incluye París y la zona autorizada (en azul), además de CDG, Orly y el Parc des Expositions de Villepinte (para la estimación).",
    approach_title: "Fuera de zona: coste de aproximación",
    approach_text:
      "Fuera de la zona del taxi parisino, puede aplicarse un coste de aproximación según la distancia entre el taxi y tu dirección. Cuanto más lejos esté el taxi, mayor será el coste. Esto es indicativo y depende del tráfico.",

    // Map section
    map_title: "Mapa (zona + localización)",
    map_note:
      "El mapa muestra tu posición (si autorizas) y una zona indicativa. La confirmación final depende de la normativa vigente y del municipio exacto.",
    map_btn_locate: "Usar mi ubicación",
    map_btn_reset: "Reiniciar",

    // Estimator section
    estimation_title: "Simulación de precio (indicativa)",
    estimation_intro:
      "Obtén una horquilla estimada según distancia y duración. El precio final puede variar por tráfico y condiciones reales.",
    estimation_pickup: "Salida",
    estimation_dropoff: "Destino",
    estimation_btn: "Calcular estimación",
    estimation_loading: "Calculando…",
    estimation_result_title: "Estimación",
    estimation_result_range: "Rango estimado",
    estimation_result_distance: "Distancia",
    estimation_result_duration: "Duración estimada",
    estimation_disclaimer:
      "Estimación indicativa. El importe final depende de la circulación, la espera y la normativa.",
    estimation_rules_title: "Reglas importantes",
    estimation_rules_bullets:
      "• Reserva inmediata (en zona): +4€ si la solicitud es para los próximos 15 min.\n• Reserva anticipada (en zona): +7€ si es para más tarde (ej.: mañana).\n• Fuera de zona: coste de aproximación según ubicación real del taxi.\n• Más de 80 km: presupuesto bajo demanda, incluso saliendo de zona.\n• Beauvais: puede estimarse; desde Beauvais hacia París puede aplicarse aproximación 100–120€ (según ubicación/condiciones).",

    // Booking form
    booking_title: "Reserva",
    booking_intro:
      "Rellena el formulario y recibirás confirmación lo antes posible.",
    f_name: "Nombre",
    f_surname: "Apellido",
    f_phone: "Teléfono",
    f_email: "Email",
    f_pickup: "Dirección de salida",
    f_dropoff: "Dirección de destino",
       f_date: "Fecha",
       f_time: "Hora",
       f_passengers: "Pasajeros",
       f_luggage: "Equipaje (opcional)",
       f_message: "Mensaje (opcional)",
       f_submit: "Enviar solicitud",
       f_day_booking_title: "Reserva por el día (presupuesto)",
       f_day_booking_text:
      "Para disponibilidad a la jornada, solicita un presupuesto personalizado.",

       contact_title: "Contacto",
       contact_intro:
       "WhatsApp recomendado para una respuesta rápida. También puedes llamar o escribir.",
        contact_call: "Llamar",
        contact_whatsapp: "WhatsApp",
        contact_email: "Email",

        footer_badge_1: "Francia, Europa e Internacional",
        footer_badge_2: "Pedidos multicanal",
        footer_badge_3: "Pago con tarjeta en el taxi",
        footer_badge_4: "Trayectos optimizados",
        footer_badge_5: "Servicio de alta gama",
        footer_rights: "Todos los derechos reservados — {year}"
  },
      ar: {
        nav_sub:"القائمة",
        brand_sub:"خدمة فاخرة — باريس وإيل دو فرانس",
        nav_services:"الخدمات",
        nav_tarifs:"الأسعار",
        nav_estimation:"تقدير",
        nav_map:"الخريطة",
        nav_booking:"حجز",
        nav_contact:"تواصل",
        drawer_tip_t:"ملاحظة:",
        drawer_tip_b:"يمكنك إدارة كل شيء من الآيفون (تعديل الملف + Commit).",

        hero_pill:"دقة • خصوصية • راحة",
        hero_h1:"تاكسي فاخر في باريس وإيل-دو-فرانس — CDG، Orly، Villepinte، Versailles",
        hero_lead:"استقبال في الوقت المحدد بدون تأخير. سائق محترف وهادئ مع مساعدة للأمتعة عند الحاجة. طرق الدفع: نقداً، بطاقات، Apple Pay، Google Pay، PayPal. فاتورة عند الطلب.",
        hero_cta1:"احجز الآن",
        hero_cta2:"قدّر الرحلة",
        hero_cta3:"اعرض الأسعار",
        hero_chip1_t:"السيارة",
        hero_chip1_b:"Toyota Corolla (ستيشن) — واسعة وصندوق كبير — حتى 4 ركاب.",
        hero_chip2_t:"المناطق",
        hero_chip2_b:"باريس + منطقة التاكسي + CDG/Orly/Villepinte (حسب القواعد).",
        hero_chip3_t:"مسافات طويلة",
        hero_chip3_b:"Orléans، Troyes… تقدير تقريبي أو عرض سعر.",
        pay_cards:"بطاقات • جميع الأنواع",
        hero_badge:"باريس داخل الدائرة = داخل الطريق الدائري (20 حي).",
        photo_cta:"اطلب الاستقبال",
        stat1_k:"تنقلات",
        stat2_k:"الخدمة",
        stat2_v:"فاخرة وهادئة",
        stat3_k:"خيار",
        stat3_v:"يوم كامل (عرض سعر)",

        services_h2:"خدمات راقية",
        services_p:"تجربة بسيطة: حجز واضح، قيادة سلسة، تواصل سريع. اذكر أي متطلبات خاصة في الرسالة.",
        s1_t:"دقة وراحة",
        s1_p:"استقبال في الوقت المحدد وقيادة سلسة مع اهتمام وخصوصية.",
        s1_l1:"سائق محترف وهادئ",
        s1_l2:"مساعدة للأمتعة",
        s1_l3:"فاتورة عند الطلب",
        s2_t:"المطارات والمحطات",
        s2_p:"CDG / Orly / Villepinte: تنقلات منتظمة وراحة بال.",
        s2_l1:"CDG ↔ باريس • Orly ↔ باريس",
        s2_l2:"CDG ↔ Orly (تبديل)",
        s2_l3:"معرض Villepinte",
        s3_t:"مسافات طويلة",
        s3_p:"تقدير تقريبي أو عرض سعر حسب المسافة والوقت.",
        s3_l1:"حجز يوم كامل: عرض سعر",
        s3_l2:"دفع بالبطاقة/بدون تلامس",
        s3_l3:"رسالة سريعة عبر النموذج",

        tarifs_h2:"شرح الأسعار",
        tarifs_p:"داخل منطقة تاكسي باريس (باريس + المنطقة الزرقاء + CDG/Orly/Villepinte) تُطبق قواعد خاصة. خارجها: عداد + احتمال عداد اقتراب.",
        tarifs_bloc1_t:"رسوم الحجز",
        tarifs_th1:"النوع",
        tarifs_th2:"المبلغ",
        tarifs_th3:"الشرط",
        t_res_immed:"حجز فوري",
        t_res_immed_c:"استقبال خلال ~15 دقيقة",
        t_res_adv:"حجز مسبق",
        t_res_adv_c:"مثال: اليوم للغد",
        tarifs_note_zone:"مهم: 4€ / 7€ فقط داخل منطقة تاكسي باريس.",
        tarifs_bloc2_t:"تعرفة ثابتة للمطارات (داخل باريس)",
        t_forfait_trajet:"المسار",
        t_forfait_prix:"السعر",
        t_cdg_rd:"CDG ↔ باريس (الضفة اليمنى)",
        t_cdg_rg:"CDG ↔ باريس (الضفة اليسرى)",
        t_orly_rd:"Orly ↔ باريس (الضفة اليمنى)",
        t_orly_rg:"Orly ↔ باريس (الضفة اليسرى)",
        tarifs_note_traffic:"التعرفة الثابتة حسب التنظيم. الازدحام يؤثر على الوقت لا على التعرفة الثابتة.",
        tarifs_out_t:"خارج المنطقة: عداد + عداد اقتراب (إن وجد)",
        tarifs_out_p:"خارج المنطقة يعتمد عداد الاقتراب على موقع التاكسي وقت الطلب والمسافة حتى عنوان الاستقبال. التقديرات تقريبية وتتأثر بالازدحام.",
        tarifs_out_ex_t:"مثال (تقريبي):",
        tarifs_out_ex_b:"Beauvais → باريس (أو CDG/Orly): قد يُقدر عداد الاقتراب بين 100€ و120€ حسب الحالة.",

        est_h2:"تقدير (نطاق) — المسافة والوقت",
        est_p:"تقدير تقريبي حسب المسافة والوقت (Google). السعر النهائي يعتمد على الازدحام والقواعد.",
        est_form_t:"احسب المسار",
        f_pickup:"عنوان الاستقبال",
        f_dropoff:"الوجهة",
        f_when:"التاريخ والوقت",
        f_when_hint:"للحجز الفوري: استقبال ~15 دقيقة.",
        f_pax:"عدد الركاب",
        f_pax_hint:"حتى 4 ركاب.",
        btn_est:"تقدير",
        btn_loc:"استخدم موقعي",
        btn_clear:"مسح",
        r_distance:"المسافة",
        r_time:"الوقت المتوقع",
        r_zone:"القاعدة المطبقة",
        r_bookingfee:"رسوم الحجز",
        r_price:"التقدير (نطاق)",
        r_action:"الإجراء",
        est_rules_t:"تذكير:",
        est_rules_b:"4€ (فوري) أو 7€ (مسبق) فقط داخل منطقة تاكسي باريس. خارجها: عداد + احتمال اقتراب. أكثر من 80 كم: يُفضل عرض سعر.",
        est_map_t:"الخريطة (المنطقة + الموقع)",
        est_map_p:"الخريطة تعرض موقعك (إذا سمحت) ومنطقة تقريبية. الحدود الرسمية قد تختلف.",
        map_badge:"إذا لم تظهر الخريطة، تحقق من مفتاح API.",

        zone_h2:"منطقة تاكسي باريس",
        zone_p:"داخل هذه المنطقة تُطبق رسوم الحجز (4€/7€). خارجها عداد + احتمال اقتراب.",
        zone_info_t:"معلومة للزبائن",
        zone_info_p:"الأسعار تختلف حسب المنطقة والمسار. التقديرات تقريبية وتتأثر بالازدحام.",
        zone_l1:"باريس داخل الدائرة باللون الأحمر",
        zone_l2:"منطقة التاكسي باللون الأزرق",
        zone_l3:"CDG / Orly / Villepinte ضمن التقدير",
        zone_note:"إذا كان الاستقبال خارج المنطقة قد نقترح عرض سعر.",

        book_h2:"حجز",
        book_p:"املأ النموذج: الاسم، التواصل، العناوين، الوقت والرسالة. تأكيد سريع. ليوم كامل اختر “يوم كامل (عرض سعر)”.",
        book_form_t:"النموذج",
        f_lname:"اللقب",
        f_fname:"الاسم",
        f_phone:"الهاتف",
        f_email:"البريد (اختياري)",
        f_type:"النوع",
        type_course:"رحلة",
        type_day:"يوم كامل (عرض سعر)",
        f_bags:"الأمتعة",
        bags_0:"0",
        bags_1:"1–2",
        bags_2:"3–4",
        bags_3:"+4",
        f_msg:"الرسالة",
        f_msg_hint:"كلما كانت أدق كان التأكيد أسرع.",
        btn_send:"أرسل الطلب",
        book_badge:"الدفع: نقداً، بطاقات، Apple Pay، Google Pay، PayPal — فاتورة عند الطلب.",

        contact_t:"تواصل",
        contact_p:"ضع رقمك وبريدك في الكود وأضف رابط Google Business عند جاهزيته.",
        contact_phone_t:"الهاتف:",
        contact_email_t:"البريد:",
        contact_gmb_t:"Google Business:",
        contact_note:"التقديرات تقريبية وتتأثر بالازدحام.",

        seo_h2:"تاكسي باريس وإيل-دو-فرانس",
        seo_p1:"Taxi Paris Karim: CDG، Orly، Villepinte، Versailles و CDG ↔ Orly. Beauvais: باريس → Beauvais، Orly → Beauvais، CDG → Beauvais (تقدير تقريبي)، و Beauvais → باريس (اقتراب تقريبي).",
        seo_p2:"المسافات الطويلة قد تحتاج عرض سعر فوق 80 كم. خارج المنطقة: عداد + احتمال اقتراب.",

        foot1:"خدمة فاخرة — باريس وإيل-دو-فرانس • CDG • Orly • Villepinte • Versailles",
        foot2:"© {year} — جميع الحقوق محفوظة.",
        foot_link1:"حجز",
        foot_link2:"الأسعار",
        foot_link3:"تقدير",
        foot_link4:"المنطقة"
      }
    };

    function setLang(lang){
      const dict = I18N[lang] || I18N.fr;
      document.documentElement.lang = lang === 'ar' ? 'ar' : (lang === 'en' ? 'en' : 'fr');
      document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';

      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n');
        if(dict[k] != null) el.textContent = dict[k];
      });

      // Buttons active state
      document.getElementById('langFR').classList.toggle('active', lang === 'fr');
      document.getElementById('langEN').classList.toggle('active', lang === 'en');
      document.getElementById('langES').classList.toggle('active', lang === 'es');
      document.getElementById('langAR').classList.toggle('active', lang === 'ar');

      // Footer year replacement for EN/AR (optional)
      const foot2 = document.querySelector('[data-i18n="foot2"]');
      if(foot2 && (dict.foot2 || '').includes('{year}')){
        foot2.textContent = dict.foot2.replace('{year}', new Date().getFullYear());
      }
    }

    document.getElementById('langFR').addEventListener('click', () => setLang('fr'));
    document.getElementById('langEN').addEventListener('click', () => setLang('en'));
    document.getElementById('langES').addEventListener('click', () => setLang('es'));
    document.getElementById('langAR').addEventListener('click', () => setLang('ar'));

    // default
    setLang('fr');

    // ----------------------------
    // Booking form -> mailto (simple, no backend)
    // ----------------------------
    document.getElementById('btnSend').addEventListener('click', ()=>{
      const data = {
        last: document.getElementById('lname').value.trim(),
        first: document.getElementById('fname').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        email: document.getElementById('email').value.trim(),
        pickup: document.getElementById('b_pickup').value.trim(),
        dropoff: document.getElementById('b_dropoff').value.trim(),
        when: document.getElementById('b_when').value,
        type: document.getElementById('b_type').value,
        pax: document.getElementById('b_pax').value,
        bags: document.getElementById('b_bags').value,
        msg: document.getElementById('msg').value.trim()
      };

      if(!data.last || !data.first || !data.phone || !data.pickup || !data.dropoff){
        alert("Merci de renseigner au minimum : nom, prénom, téléphone, prise en charge et destination.");
        return;
      }

      const subject = encodeURIComponent(`Réservation taxi — ${data.first} ${data.last}`);
      const body = encodeURIComponent(
        `Nom: ${data.last}\nPrénom: ${data.first}\nTéléphone: ${data.phone}\nEmail: ${data.email || "-"}\n\nPrise en charge: ${data.pickup}\nDestination: ${data.dropoff}\nDate/Heure: ${data.when || "-"}\nType: ${data.type}\nPassagers: ${data.pax}\nBagages: ${data.bags}\n\nMessage:\n${data.msg || "-"}\n`
      );

      window.location.href = `mailto:${CONFIG.email}?subject=${subject}&body=${body}`;
    });

    // ----------------------------
    // Google Maps + Estimation
    // ----------------------------
    let map, userMarker, pickupAC, dropoffAC, bPickupAC, bDropoffAC;
    let zoneCircle, parisRect, vemarsCircle;
    const PARIS_CENTER = {lat:48.8566, lng:2.3522};

    function money(n){ return (Math.round(n*10)/10).toFixed(0) + "€"; }

    function minutesBetween(now, dt){
      return Math.round((dt.getTime() - now.getTime())/60000);
    }

    function isBeauvais(placeText){
      const t = (placeText||"").toLowerCase();
      return t.includes("beauvais");
    }
    function isCDG(placeText){
      const t = (placeText||"").toLowerCase();
      return t.includes("charles") || t.includes("cdg") || t.includes("roissy");
    }
    function isOrly(placeText){
      const t = (placeText||"").toLowerCase();
      return t.includes("orly") || t.includes("ory");
    }
    function isVillepinte(placeText){
      const t = (placeText||"").toLowerCase();
      return t.includes("villepinte") || t.includes("parc des expositions") || t.includes("parc expo");
    }
    function isParisIntra(placeText){
      const t = (placeText||"").toLowerCase();
      return t.includes("paris") && !t.includes("beauvais"); // basic
    }

    // Heuristique de "zone taxi parisien" (sans polygone officiel) :
    // - Paris intra-muros OU
    // - CDG / Orly / Villepinte OU
    // - dans un rayon de Vémars (15km) (logique interne demandée)
    async function isInTaxiZone(pickupText, pickupLatLng){
      if(isParisIntra(pickupText) || isCDG(pickupText) || isOrly(pickupText) || isVillepinte(pickupText)) return true;

      // Vémars radius check (Distance Matrix)
      try{
        const dm = new google.maps.DistanceMatrixService();
        const res = await new Promise((resolve,reject)=>{
          dm.getDistanceMatrix({
            origins: [pickupLatLng],
            destinations: [{lat: CONFIG.vemarsLat, lng: CONFIG.vemarsLng}],
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.METRIC
          }, (r, status)=>{
            if(status !== "OK") reject(status);
            else resolve(r);
          });
        });
        const meters = res.rows?.[0]?.elements?.[0]?.distance?.value;
        if(typeof meters === "number"){
          const km = meters/1000;
          return km <= CONFIG.vemarsRadiusKm;
        }
      }catch(e){}
      return false;
    }

    function drawZones(){
      // Paris approx rectangle (indicatif) — rouge
      parisRect = new google.maps.Rectangle({
        bounds: {
          north: 48.902,
          south: 48.815,
          east: 2.469,
          west: 2.224
        },
        strokeColor: "#ff3b3b",
        strokeOpacity: 0.95,
        strokeWeight: 2,
        fillColor: "#ff3b3b",
        fillOpacity: 0.08,
        map
      });

      // Taxi zone indicative circle — bleu
      zoneCircle = new google.maps.Circle({
        center: PARIS_CENTER,
        radius: 25000, // 25km indicative
        strokeColor: "#6bbcff",
        strokeOpacity: 0.9,
        strokeWeight: 2,
        fillColor: "#6bbcff",
        fillOpacity: 0.06,
        map
      });

      // Vémars circle (internal logic)
      vemarsCircle = new google.maps.Circle({
        center: {lat: CONFIG.vemarsLat, lng: CONFIG.vemarsLng},
        radius: CONFIG.vemarsRadiusKm * 1000,
        strokeColor: "#d6b36a",
        strokeOpacity: 0.85,
        strokeWeight: 2,
        fillColor: "#d6b36a",
        fillOpacity: 0.05,
        map
      });
    }

    function setUserMarker(latlng){
      if(!userMarker){
        userMarker = new google.maps.Marker({
          position: latlng,
          map,
          title: "Votre position",
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 8,
            fillColor: "#7CFFB2",
            fillOpacity: 1,
            strokeColor: "#0b0c10",
            strokeWeight: 2
          }
        });
      }else{
        userMarker.setPosition(latlng);
      }
      map.panTo(latlng);
    }

    async function estimateRoute(){
      const pickup = document.getElementById('pickup').value.trim();
      const dropoff = document.getElementById('dropoff').value.trim();
      if(!pickup || !dropoff){
        alert("Merci de renseigner une prise en charge et une destination.");
        return;
      }

      const whenVal = document.getElementById('when').value;
      const now = new Date();
      const when = whenVal ? new Date(whenVal) : null;

      // Distance Matrix for time/distance
      const dm = new google.maps.DistanceMatrixService();
      const dmRes = await new Promise((resolve,reject)=>{
        dm.getDistanceMatrix({
          origins: [pickup],
          destinations: [dropoff],
          travelMode: google.maps.TravelMode.DRIVING,
          unitSystem: google.maps.UnitSystem.METRIC
        }, (r, status)=>{
          if(status !== "OK") reject(status);
          else resolve(r);
        });
      });

      const el = dmRes.rows?.[0]?.elements?.[0];
      if(!el || el.status !== "OK"){
        alert("Impossible de calculer l’itinéraire. Vérifie les adresses.");
        return;
      }

      const meters = el.distance.value;
      const seconds = el.duration.value;
      const km = meters/1000;
      const mins = Math.round(seconds/60);

      // Get pickup latlng via Geocoder (needed for zone logic)
      const gc = new google.maps.Geocoder();
      const geo = await new Promise((resolve,reject)=>{
        gc.geocode({address: pickup}, (res, status)=>{
          if(status !== "OK" || !res?.[0]) reject(status);
          else resolve(res[0]);
        });
      });
      const pickupLatLng = geo.geometry.location;

      const inZone = await isInTaxiZone(pickup, pickupLatLng);

      // Booking fee only applies in taxi zone
      let bookingFee = 0;
      if(inZone){
        if(when){
          const diffMin = minutesBetween(now, when);
          bookingFee = (diffMin <= CONFIG.bookingImmediateMinutes) ? CONFIG.bookingFeeImmediate : CONFIG.bookingFeeAdvance;
        }else{
          // if no date/time, assume immediate
          bookingFee = CONFIG.bookingFeeImmediate;
        }
      }

      // Pricing model (indicatif)
      // - If in zone: estimate based on distance + time (premium taxi estimate), then add booking fee (4/7)
      // - If out of zone: show "devis" or taximeter note + possible approach
      // - If > 80 km: devis recommended
      // - Beauvais logic:
      //   - Beauvais -> (Paris/CDG/Orly/zone) : add approach 100-120€ (range) + ride estimate
      //   - (Paris/CDG/Orly/zone) -> Beauvais : booking 4/7 only (no approach fixed), estimate still indicative

      const pickupIsBeauvais = isBeauvais(pickup);
      const dropIsBeauvais = isBeauvais(dropoff);

      let ruleText = "";
      let priceMin = 0;
      let priceMax = 0;
      let note = "";
      let action = "";

      // base estimate from distance/time (rough premium range)
      // tuned to feel "premium": base + km + time
      // (You can adjust after testing.)
      const base = 8;
      const kmRateMin = 1.6;
      const kmRateMax = 2.1;
      const timeRateMin = 0.35; // per minute
      const timeRateMax = 0.55;

      let rideMin = base + km*kmRateMin + mins*timeRateMin;
      let rideMax = base + km*kmRateMax + mins*timeRateMax;

      // If airport flat fares Paris intra -> apply when applicable (only indicative: show as rule)
      // We keep your official forfaits for those routes as priority
      const isParis = isParisIntra(pickup) || isParisIntra(dropoff);
      if(isParis && (isCDG(pickup)||isCDG(dropoff) || isOrly(pickup)||isOrly(dropoff))){
        // Determine bank (rive droite/gauche) by destination keyword (simple)
        // For better accuracy, you can add a selector later.
        const textAll = (pickup + " " + dropoff).toLowerCase();
        const isRight = textAll.includes("rive droite") || textAll.includes("1er") || textAll.includes("2e") || textAll.includes("3e") || textAll.includes("4e") || textAll.includes("8e") || textAll.includes("9e") || textAll.includes("10e") || textAll.includes("11e") || textAll.includes("12e") || textAll.includes("17e") || textAll.includes("18e") || textAll.includes("19e") || textAll.includes("20e");
        const isLeft = textAll.includes("rive gauche") || textAll.includes("5e") || textAll.includes("6e") || textAll.includes("7e") || textAll.includes("13e") || textAll.includes("14e") || textAll.includes("15e") || textAll.includes("16e");

        if(isCDG(pickup) || isCDG(dropoff)){
          const forfait = isLeft ? 65 : (isRight ? 56 : null);
          if(forfait){
            rideMin = forfait;
            rideMax = forfait;
            ruleText = "Forfait aéroport (CDG ↔ Paris intra-muros)";
            note = "Forfait réglementé (le temps dépend de la circulation).";
          }
        }
        if(isOrly(pickup) || isOrly(dropoff)){
          const forfait = isLeft ? 36 : (isRight ? 45 : null);
          if(forfait){
            rideMin = forfait;
            rideMax = forfait;
            ruleText = "Forfait aéroport (Orly ↔ Paris intra-muros)";
            note = "Forfait réglementé (le temps dépend de la circulation).";
          }
        }
      }

      // Long distance threshold
      const longTrip = km >= CONFIG.longTripKmThreshold;

      if(!inZone){
        ruleText = "Hors zone taxi parisien";
        action = "Devis recommandé";
        // show only indicative meter estimate range
        priceMin = rideMin;
        priceMax = rideMax;
        note = "Hors zone : tarification au taximètre. Un compteur d’approche peut s’ajouter selon la distance entre le taxi et votre adresse au moment de la demande. Estimation indicative (circulation, travaux…).";
      } else {
        ruleText = ruleText || "Zone taxi parisien (réservation 4€ / 7€)";
        priceMin = rideMin + bookingFee;
        priceMax = rideMax + bookingFee;
        action = longTrip ? "Devis conseillé" : "Réservable";
        if(!note){
          note = "Estimation indicative (distance + temps). La circulation peut modifier le temps. Les 4€ / 7€ s’appliquent uniquement dans la zone taxi parisien.";
        }
      }

      // Beauvais special handling
      if(pickupIsBeauvais && !dropIsBeauvais){
        // Beauvais -> zone (Paris/CDG/Orly etc) : add approach 100-120€ in addition
        // NOTE: you asked approach 100-120 applies Beauvais -> Paris (we extend to zone destinations)
        priceMin += CONFIG.beauvaisApproachMin;
        priceMax += CONFIG.beauvaisApproachMax;
        ruleText = "Beauvais → destination (approche indicative)";
        action = "Devis recommandé";
        note = "Beauvais → Paris/CDG/Orly : un compteur d’approche peut être estimé entre 100€ et 120€ selon disponibilité et circulation. Estimation indicative.";
      }
      if(!pickupIsBeauvais && dropIsBeauvais){
        // Zone -> Beauvais : booking fee in zone, no fixed approach
        ruleText = "Destination Beauvais (estimation indicative)";
        note = "Beauvais n’est pas un forfait : estimation indicative au taximètre (distance + temps).";
      }

      // If long trip: push to quote
      if(longTrip){
        action = "Devis recommandé (≥ 80 km)";
        note += " Au-delà de 80 km : devis recommandé (prix dépend du temps, du trafic et des conditions).";
      }

      // Update UI
      document.getElementById('result').style.display = "grid";
      document.getElementById('rDistance').textContent = (km.toFixed(1) + " km");
      document.getElementById('rTime').textContent = (mins + " min");
      document.getElementById('rRule').textContent = ruleText;
      document.getElementById('rBookFee').textContent = inZone ? (bookingFee + "€") : "—";
      document.getElementById('rPrice').textContent = `${money(priceMin)} – ${money(priceMax)}`;
      document.getElementById('rAction').textContent = action;
      document.getElementById('rNote').textContent = note;

      // Also pan map to pickup if possible
      if(map){
        map.panTo(pickupLatLng);
        map.setZoom(11);
      }
    }

    document.getElementById('btnEstimate').addEventListener('click', ()=>estimateRoute().catch(err=>{
      console.error(err);
      alert("Erreur estimation. Vérifie la clé API, la facturation Google, ou les adresses.");
    }));

    document.getElementById('btnClear').addEventListener('click', ()=>{
      ["pickup","dropoff","when"].forEach(id=>document.getElementById(id).value="");
      document.getElementById('result').style.display="none";
    });

    document.getElementById('btnLocate').addEventListener('click', ()=>{
      if(!navigator.geolocation){
        alert("Géolocalisation non disponible sur ce navigateur.");
        return;
      }
      navigator.geolocation.getCurrentPosition((pos)=>{
        const latlng = {lat: pos.coords.latitude, lng: pos.coords.longitude};
        setUserMarker(latlng);
        // reverse geocode to fill pickup
        const gc = new google.maps.Geocoder();
        gc.geocode({location: latlng}, (res, status)=>{
          if(status === "OK" && res?.[0]){
            document.getElementById('pickup').value = res[0].formatted_address;
          }
        });
      }, ()=>{
        alert("Autorise la localisation pour utiliser cette fonction.");
      }, {enableHighAccuracy:true, timeout:12000});
    });

    // ----------------------------
    // initMap callback
    // ----------------------------
    window.initMap = function(){
      map = new google.maps.Map(document.getElementById("map"), {
        center: PARIS_CENTER,
        zoom: 10,
        styles: [
          {elementType:"geometry", stylers:[{color:"#0b0c10"}]},
          {elementType:"labels.text.fill", stylers:[{color:"#f7f6f2"}]},
          {elementType:"labels.text.stroke", stylers:[{color:"#0b0c10"}]},
          {featureType:"administrative", elementType:"geometry.stroke", stylers:[{color:"#2b2c33"}]},
          {featureType:"poi", elementType:"labels.text.fill", stylers:[{color:"#d6b36a"}]},
          {featureType:"road", elementType:"geometry", stylers:[{color:"#151824"}]},
          {featureType:"road", elementType:"geometry.stroke", stylers:[{color:"#232635"}]},
          {featureType:"road", elementType:"labels.text.fill", stylers:[{color:"#c9c7c0"}]},
          {featureType:"transit", elementType:"geometry", stylers:[{color:"#141725"}]},
          {featureType:"water", elementType:"geometry", stylers:[{color:"#0a1220"}]},
          {featureType:"water", elementType:"labels.text.fill", stylers:[{color:"#6bbcff"}]}
        ],
        mapTypeControl:false,
        streetViewControl:false,
        fullscreenControl:true
      });

      drawZones();

      // Autocomplete
      const opts = { fields: ["formatted_address","geometry","name"], types: ["geocode"] };
      pickupAC = new google.maps.places.Autocomplete(document.getElementById("pickup"), opts);
      dropoffAC = new google.maps.places.Autocomplete(document.getElementById("dropoff"), opts);
      bPickupAC = new google.maps.places.Autocomplete(document.getElementById("b_pickup"), opts);
      bDropoffAC = new google.maps.places.Autocomplete(document.getElementById("b_dropoff"), opts);

      pickupAC.addListener("place_changed", ()=>{
        const p = pickupAC.getPlace();
        if(p?.geometry?.location){
          map.panTo(p.geometry.location);
          map.setZoom(12);
        }
      });

      // Try auto locate silently (if allowed)
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition((pos)=>{
          setUserMarker({lat: pos.coords.latitude, lng: pos.coords.longitude});
        }, ()=>{}, {enableHighAccuracy:false, timeout:4000});
      }
    };
  </script>

  <!-- Google Maps JS (TA CLÉ) -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDFo8dagVZdTfgGoAqmflLeA8xVNPB_cus&librariesqp=places&callback=initMap"
    async
    defer
  ></script>
</body>
</html>
